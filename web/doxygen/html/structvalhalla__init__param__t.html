<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libvalhalla: valhalla_init_param_t Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>valhalla_init_param_t Struct Reference</h1><!-- doxytag: class="valhalla_init_param_t" -->
<p>Parameters for <a class="el" href="valhalla_8h.html#a030111fb39808873f50e72497c14746b" title="Init a scanner and the database.">valhalla_init()</a>.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="valhalla_8h_source.html">valhalla.h</a>&gt;</code></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvalhalla__init__param__t.html#a7a27e1f58f4f3f4b14768cb43a31b57f">parser_nb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvalhalla__init__param__t.html#abeee00184848feb1c1b0ee93fa350803">grabber_nb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvalhalla__init__param__t.html#aca047ae4b2d15e9993224a6ab63081b9">commit_int</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvalhalla__init__param__t.html#a0229c5413b664659bbbd5440b29e5a48">decrapifier</a>: 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvalhalla__init__param__t.html#aea6cb773f5251e18ac418f977075d26c">od_cb</a> )(const char *file, <a class="el" href="valhalla_8h.html#af6e1c27662123ffc4ba1d2eb27e0858f">valhalla_event_od_t</a> e, const char *id, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvalhalla__init__param__t.html#ae14fd0b73e3479830319f82ecf3ccc15">od_data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvalhalla__init__param__t.html#a48fc54b9941434f357315f6aad498b71">gl_cb</a> )(<a class="el" href="valhalla_8h.html#a636384c622064b48e8f6142bc52a9e48">valhalla_event_gl_t</a> e, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvalhalla__init__param__t.html#a0f7fe7b5ea6b983fa148b9d8ab130ca6">gl_data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvalhalla__init__param__t.html#ae820d969f85eda41ce6ff276d91a1e03">md_cb</a> )(<a class="el" href="valhalla_8h.html#ad1bd07722431d8f55f24329cf280e48d">valhalla_event_md_t</a> e, const char *id, const <a class="el" href="structvalhalla__file__t.html">valhalla_file_t</a> *file, const <a class="el" href="structvalhalla__metadata__t.html">valhalla_metadata_t</a> *md, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvalhalla__init__param__t.html#ac1ff7b0c62428c61528d5f8c250ca670">md_data</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Parameters for <a class="el" href="valhalla_8h.html#a030111fb39808873f50e72497c14746b" title="Init a scanner and the database.">valhalla_init()</a>. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00494">494</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="aca047ae4b2d15e9993224a6ab63081b9"></a><!-- doxytag: member="valhalla_init_param_t::commit_int" ref="aca047ae4b2d15e9993224a6ab63081b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="structvalhalla__init__param__t.html#aca047ae4b2d15e9993224a6ab63081b9">valhalla_init_param_t::commit_int</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of data (set of metadata) to be inserted or updated in one pass in the database (BEGIN and COMMIT sql mechanisms). A value between 100 and 200 is a good choice. The default interval is 128. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00515">515</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0229c5413b664659bbbd5440b29e5a48"></a><!-- doxytag: member="valhalla_init_param_t::decrapifier" ref="a0229c5413b664659bbbd5440b29e5a48" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="structvalhalla__init__param__t.html#a0229c5413b664659bbbd5440b29e5a48">valhalla_init_param_t::decrapifier</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If the "title" metadata is not available with a file, the decrapifier can be used to create this metadata by using the filename. This feature is very useful when the grabbing support is enabled, because the title is used as keywords in a lot of grabbers. By default the decrapifier is disabled. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00523">523</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>

</div>
</div>
<a class="anchor" id="a48fc54b9941434f357315f6aad498b71"></a><!-- doxytag: member="valhalla_init_param_t::gl_cb" ref="a48fc54b9941434f357315f6aad498b71" args=")(valhalla_event_gl_t e, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structvalhalla__init__param__t.html#a48fc54b9941434f357315f6aad498b71">valhalla_init_param_t::gl_cb</a>)(<a class="el" href="valhalla_8h.html#a636384c622064b48e8f6142bc52a9e48">valhalla_event_gl_t</a> e, void *data)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When <code>gl_cb</code> is defined, events can be sent by Valhalla according to some global actions. See <a class="el" href="valhalla_8h.html#a636384c622064b48e8f6142bc52a9e48" title="Events for general actions in Valhalla.">valhalla_event_gl_t</a> for details on the events. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00545">545</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0f7fe7b5ea6b983fa148b9d8ab130ca6"></a><!-- doxytag: member="valhalla_init_param_t::gl_data" ref="a0f7fe7b5ea6b983fa148b9d8ab130ca6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structvalhalla__init__param__t.html#a0f7fe7b5ea6b983fa148b9d8ab130ca6">valhalla_init_param_t::gl_data</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>User data for global event callback. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00547">547</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>

</div>
</div>
<a class="anchor" id="abeee00184848feb1c1b0ee93fa350803"></a><!-- doxytag: member="valhalla_init_param_t::grabber_nb" ref="abeee00184848feb1c1b0ee93fa350803" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="structvalhalla__init__param__t.html#abeee00184848feb1c1b0ee93fa350803">valhalla_init_param_t::grabber_nb</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of threads for grabbing (max 16); the grabbers are concurrent as long as their ID are different. The default number of threads is 2. To use many threads will not increase a lot the use of memory, but it can increase significantly the use of the bandwidth for Internet and the CPU load. Set this parameter to 1, in order to serialize the calls on the grabbers. A value of 3 or 4 is a good choice for most of the uses. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00509">509</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae820d969f85eda41ce6ff276d91a1e03"></a><!-- doxytag: member="valhalla_init_param_t::md_cb" ref="ae820d969f85eda41ce6ff276d91a1e03" args=")(valhalla_event_md_t e, const char *id, const valhalla_file_t *file, const valhalla_metadata_t *md, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structvalhalla__init__param__t.html#ae820d969f85eda41ce6ff276d91a1e03">valhalla_init_param_t::md_cb</a>)(<a class="el" href="valhalla_8h.html#ad1bd07722431d8f55f24329cf280e48d">valhalla_event_md_t</a> e, const char *id, const <a class="el" href="structvalhalla__file__t.html">valhalla_file_t</a> *file, const <a class="el" href="structvalhalla__metadata__t.html">valhalla_metadata_t</a> *md, void *data)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When <code>md_cb</code> is defined, events can be sent by Valhalla each time that a file metadata set is completed. Where <code>id</code> is the textual identifier (for example: "amazon", "exif", etc, ...) of the grabber when the event <code>e</code> is VALHALLA_EVENTMD_GRABBER. This callback is called for each metadata. If there are 10 metadata in one set, then this callback is called 10 times. The use of this callback is not recommanded. It may increase significantly the use of memory because all metadata are kept (and duplicated when it comes from the parser) until a set is fully read. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00559">559</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac1ff7b0c62428c61528d5f8c250ca670"></a><!-- doxytag: member="valhalla_init_param_t::md_data" ref="ac1ff7b0c62428c61528d5f8c250ca670" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structvalhalla__init__param__t.html#ac1ff7b0c62428c61528d5f8c250ca670">valhalla_init_param_t::md_data</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>User data for metadata event callback. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00563">563</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>

</div>
</div>
<a class="anchor" id="aea6cb773f5251e18ac418f977075d26c"></a><!-- doxytag: member="valhalla_init_param_t::od_cb" ref="aea6cb773f5251e18ac418f977075d26c" args=")(const char *file, valhalla_event_od_t e, const char *id, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structvalhalla__init__param__t.html#aea6cb773f5251e18ac418f977075d26c">valhalla_init_param_t::od_cb</a>)(const char *file, <a class="el" href="valhalla_8h.html#af6e1c27662123ffc4ba1d2eb27e0858f">valhalla_event_od_t</a> e, const char *id, void *data)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When <code>od_cb</code> is defined, an event is sent for each step with an on demand query. If an event arrives, the data are really inserted in the DB. The order for the events is not determinative, VALHALLA_EVENTOD_GRABBED can be sent before VALHALLA_EVENTOD_PARSED. VALHALLA_EVENTOD_GRABBED is sent for each grabber and <code>id</code> is its textual identifier (for example: "amazon", "exif", etc, ...). Only VALHALLA_EVENTOD_ENDED is always sent at the end, but this one has not a high priority unlike other events. If the file is already (fully) inserted in the DB, only VALHALLA_EVENTOD_ENDED is sent to the callback. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00536">536</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae14fd0b73e3479830319f82ecf3ccc15"></a><!-- doxytag: member="valhalla_init_param_t::od_data" ref="ae14fd0b73e3479830319f82ecf3ccc15" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structvalhalla__init__param__t.html#ae14fd0b73e3479830319f82ecf3ccc15">valhalla_init_param_t::od_data</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>User data for ondemand callback. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00539">539</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7a27e1f58f4f3f4b14768cb43a31b57f"></a><!-- doxytag: member="valhalla_init_param_t::parser_nb" ref="a7a27e1f58f4f3f4b14768cb43a31b57f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="structvalhalla__init__param__t.html#a7a27e1f58f4f3f4b14768cb43a31b57f">valhalla_init_param_t::parser_nb</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of threads for parsing (max 8); the parsers are concurrent. The default number of threads is 2. </p>

<p>Definition at line <a class="el" href="valhalla_8h_source.html#l00499">499</a> of file <a class="el" href="valhalla_8h_source.html">valhalla.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="valhalla_8h_source.html">valhalla.h</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Sun Oct 3 18:38:35 2010 for libvalhalla by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
