<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libvalhalla: valhalla.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>valhalla.h</h1><a href="valhalla_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * GeeXboX Valhalla: tiny media scanner API.</span>
<a name="l00003"></a>00003 <span class="comment"> * Copyright (C) 2009 Mathieu Schroeter &lt;mathieu.schroeter@gamesover.ch&gt;</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * This file is part of libvalhalla.</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * libvalhalla is free software; you can redistribute it and/or</span>
<a name="l00008"></a>00008 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<a name="l00009"></a>00009 <span class="comment"> * License as published by the Free Software Foundation; either</span>
<a name="l00010"></a>00010 <span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> * libvalhalla is distributed in the hope that it will be useful,</span>
<a name="l00013"></a>00013 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00014"></a>00014 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00015"></a>00015 <span class="comment"> * Lesser General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00018"></a>00018 <span class="comment"> * License along with libvalhalla; if not, write to the Free Software</span>
<a name="l00019"></a>00019 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span>
<a name="l00020"></a>00020 <span class="comment"> */</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#ifndef VALHALLA_H</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_H</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00033"></a>00033 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#define VH_STRINGIFY(s) #s</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#define VH_TOSTRING(s) VH_STRINGIFY(s)</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span>
<a name="l00038"></a>00038 <span class="preprocessor">#define VH_VERSION_INT(a, b, c) (a &lt;&lt; 16 | b &lt;&lt; 8 | c)</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#define VH_VERSION_DOT(a, b, c) a ##.## b ##.## c</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">#define VH_VERSION(a, b, c) VH_VERSION_DOT(a, b, c)</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a>00042 <span class="preprocessor">#define LIBVALHALLA_VERSION_MAJOR  1</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">#define LIBVALHALLA_VERSION_MINOR  0</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#define LIBVALHALLA_VERSION_MICRO  0</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="preprocessor">#define LIBVALHALLA_DB_VERSION     1</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00048"></a>00048 <span class="preprocessor">#define LIBVALHALLA_VERSION_INT VH_VERSION_INT(LIBVALHALLA_VERSION_MAJOR, \</span>
<a name="l00049"></a>00049 <span class="preprocessor">                                               LIBVALHALLA_VERSION_MINOR, \</span>
<a name="l00050"></a>00050 <span class="preprocessor">                                               LIBVALHALLA_VERSION_MICRO)</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#define LIBVALHALLA_VERSION     VH_VERSION(LIBVALHALLA_VERSION_MAJOR, \</span>
<a name="l00052"></a>00052 <span class="preprocessor">                                           LIBVALHALLA_VERSION_MINOR, \</span>
<a name="l00053"></a>00053 <span class="preprocessor">                                           LIBVALHALLA_VERSION_MICRO)</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#define LIBVALHALLA_VERSION_STR VH_TOSTRING(LIBVALHALLA_VERSION)</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#define LIBVALHALLA_BUILD       LIBVALHALLA_VERSION_INT</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &lt;inttypes.h&gt;</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="comment">/******************************************************************************/</span>
<a name="l00061"></a>00061 <span class="comment">/*                                                                            */</span>
<a name="l00062"></a>00062 <span class="comment">/* Valhalla Handling                                                          */</span>
<a name="l00063"></a>00063 <span class="comment">/*                                                                            */</span>
<a name="l00064"></a>00064 <span class="comment">/******************************************************************************/</span>
<a name="l00065"></a>00065 
<a name="l00067"></a><a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f">00067</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>valhalla_s <a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a>;
<a name="l00068"></a>00068 
<a name="l00070"></a><a class="code" href="valhalla_8h.html#a54358973570a354e474cec734bcfe691">00070</a> <span class="keyword">enum</span> <a class="code" href="valhalla_8h.html#a54358973570a354e474cec734bcfe691" title="Error code returned by valhalla_run().">valhalla_errno</a> {
<a name="l00071"></a>00071   VALHALLA_ERROR_DEAD    = -4,
<a name="l00072"></a>00072   VALHALLA_ERROR_PATH    = -3,
<a name="l00073"></a>00073   VALHALLA_ERROR_HANDLER = -2,
<a name="l00074"></a>00074   VALHALLA_ERROR_THREAD  = -1,
<a name="l00075"></a>00075   VALHALLA_SUCCESS       =  0,
<a name="l00076"></a>00076 };
<a name="l00077"></a>00077 
<a name="l00079"></a><a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99">00079</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> valhalla_verb {
<a name="l00080"></a><a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99a94cf8865099b757e5524a7ab9cd6d0c6">00080</a>   <a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99a94cf8865099b757e5524a7ab9cd6d0c6">VALHALLA_MSG_NONE</a>,     
<a name="l00081"></a><a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99acb7b75c2b029c469ce777b9e6743f6b1">00081</a>   <a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99acb7b75c2b029c469ce777b9e6743f6b1">VALHALLA_MSG_VERBOSE</a>,  
<a name="l00082"></a><a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99a5dd13f5428922accf8c473f57f5b308f">00082</a>   <a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99a5dd13f5428922accf8c473f57f5b308f">VALHALLA_MSG_INFO</a>,     
<a name="l00083"></a><a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99ab4c0591235c3700328597b4e84d7c154">00083</a>   <a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99ab4c0591235c3700328597b4e84d7c154">VALHALLA_MSG_WARNING</a>,  
<a name="l00084"></a><a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99a0163bf481ffdd03ed2ce4e125bc88284">00084</a>   <a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99a0163bf481ffdd03ed2ce4e125bc88284">VALHALLA_MSG_ERROR</a>,    
<a name="l00085"></a><a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99a5f518e33e00e5966d153f7f1a9caa9c6">00085</a>   <a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99a5f518e33e00e5966d153f7f1a9caa9c6">VALHALLA_MSG_CRITICAL</a>, 
<a name="l00086"></a>00086 } <a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99" title="Verbosity level.">valhalla_verb_t</a>;
<a name="l00087"></a>00087 
<a name="l00089"></a><a class="code" href="valhalla_8h.html#a4effbe6954a940647b3d46608b494bf4">00089</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> valhalla_dl {
<a name="l00090"></a>00090   VALHALLA_DL_DEFAULT = 0,
<a name="l00091"></a>00091   VALHALLA_DL_COVER,
<a name="l00092"></a>00092   VALHALLA_DL_THUMBNAIL,
<a name="l00093"></a>00093   VALHALLA_DL_FAN_ART,
<a name="l00094"></a>00094   VALHALLA_DL_LAST
<a name="l00095"></a>00095 } <a class="code" href="valhalla_8h.html#a4effbe6954a940647b3d46608b494bf4" title="Destinations for downloading.">valhalla_dl_t</a>;
<a name="l00096"></a>00096 
<a name="l00098"></a><a class="code" href="valhalla_8h.html#aaf57aadfe2571e07fc8696ec6bbf8a9a">00098</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> valhalla_event {
<a name="l00099"></a><a class="code" href="valhalla_8h.html#aaf57aadfe2571e07fc8696ec6bbf8a9aaa374edf33d39f2fd9440bcbe7368e6d2">00099</a>   <a class="code" href="valhalla_8h.html#aaf57aadfe2571e07fc8696ec6bbf8a9aaa374edf33d39f2fd9440bcbe7368e6d2">VALHALLA_EVENT_PARSED</a> = 0,  
<a name="l00100"></a><a class="code" href="valhalla_8h.html#aaf57aadfe2571e07fc8696ec6bbf8a9aae9744906c2e07f628637053b2e0db809">00100</a>   <a class="code" href="valhalla_8h.html#aaf57aadfe2571e07fc8696ec6bbf8a9aae9744906c2e07f628637053b2e0db809">VALHALLA_EVENT_GRABBED</a>,     
<a name="l00101"></a><a class="code" href="valhalla_8h.html#aaf57aadfe2571e07fc8696ec6bbf8a9aa7cb08971d0fc9dd60b17b76c9f699c84">00101</a>   <a class="code" href="valhalla_8h.html#aaf57aadfe2571e07fc8696ec6bbf8a9aa7cb08971d0fc9dd60b17b76c9f699c84">VALHALLA_EVENT_ENDED</a>,       
<a name="l00102"></a>00102 } <a class="code" href="valhalla_8h.html#aaf57aadfe2571e07fc8696ec6bbf8a9a" title="Events for valhalla_ondemand() callback.">valhalla_event_t</a>;
<a name="l00103"></a>00103 
<a name="l00146"></a>00146 <a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *<a class="code" href="valhalla_8h.html#aabffd053f1dc2a474b555a0ed306a463" title="Init a scanner and the database.">valhalla_init</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *db,
<a name="l00147"></a>00147                            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> parser_nb, <span class="keywordtype">int</span> decrapifier,
<a name="l00148"></a>00148                            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> commit_int,
<a name="l00149"></a>00149                            <span class="keywordtype">void</span> (*od_cb) (<span class="keyword">const</span> <span class="keywordtype">char</span> *file, <a class="code" href="valhalla_8h.html#aaf57aadfe2571e07fc8696ec6bbf8a9a" title="Events for valhalla_ondemand() callback.">valhalla_event_t</a> e,
<a name="l00150"></a>00150                                           <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span>, <span class="keywordtype">void</span> *data),
<a name="l00151"></a>00151                            <span class="keywordtype">void</span> *od_data);
<a name="l00152"></a>00152 
<a name="l00161"></a>00161 <span class="keywordtype">void</span> <a class="code" href="valhalla_8h.html#a7711b5e66f39b0e1646335716b3d8b94" title="Uninit an handle.">valhalla_uninit</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle);
<a name="l00162"></a>00162 
<a name="l00171"></a>00171 <span class="keywordtype">void</span> <a class="code" href="valhalla_8h.html#ab3a132d0f4ddbd2f7ebaffaf4a299d5e" title="Change verbosity level.">valhalla_verbosity</a> (<a class="code" href="valhalla_8h.html#aed7b6533bd6c115c073db3acddf0ce99" title="Verbosity level.">valhalla_verb_t</a> level);
<a name="l00172"></a>00172 
<a name="l00185"></a>00185 <span class="keywordtype">void</span> <a class="code" href="valhalla_8h.html#a634e85f79b4d4bcbc3a0c905b7bb2be3" title="Add a path to the scanner.">valhalla_path_add</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle,
<a name="l00186"></a>00186                         <span class="keyword">const</span> <span class="keywordtype">char</span> *location, <span class="keywordtype">int</span> recursive);
<a name="l00187"></a>00187 
<a name="l00201"></a>00201 <span class="keywordtype">void</span> <a class="code" href="valhalla_8h.html#ad111f91a8512be9e2d241b65ac3e4886" title="Add a file suffix for the scanner.">valhalla_suffix_add</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle, <span class="keyword">const</span> <span class="keywordtype">char</span> *suffix);
<a name="l00202"></a>00202 
<a name="l00243"></a>00243 <span class="keywordtype">void</span> <a class="code" href="valhalla_8h.html#a66844e9bbf310b89b826243eb031c868" title="Add a keyword in the blacklist for the decrapifier.">valhalla_bl_keyword_add</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle, <span class="keyword">const</span> <span class="keywordtype">char</span> *keyword);
<a name="l00244"></a>00244 
<a name="l00257"></a>00257 <span class="keywordtype">void</span> <a class="code" href="valhalla_8h.html#aaa5115bdd0d09490b60936f71bf7ad20" title="Set a destination for the downloader.">valhalla_downloader_dest_set</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle,
<a name="l00258"></a>00258                                    <a class="code" href="valhalla_8h.html#a4effbe6954a940647b3d46608b494bf4" title="Destinations for downloading.">valhalla_dl_t</a> dl, <span class="keyword">const</span> <span class="keywordtype">char</span> *dst);
<a name="l00259"></a>00259 
<a name="l00271"></a>00271 <span class="keywordtype">void</span> <a class="code" href="valhalla_8h.html#a8fd731544a9f67bf6761aa9a3b1259c5" title="Set the state of a grabber.">valhalla_grabber_state_set</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle,
<a name="l00272"></a>00272                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span>, <span class="keywordtype">int</span> enable);
<a name="l00273"></a>00273 
<a name="l00286"></a>00286 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="valhalla_8h.html#a1ca8b4ba90a742bfdd545c7494d2329c" title="Retrieve the ID of all grabbers compiled in Valhalla.">valhalla_grabber_list_get</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span>);
<a name="l00287"></a>00287 
<a name="l00304"></a>00304 <span class="keywordtype">int</span> <a class="code" href="valhalla_8h.html#a65d2c14fe08ff20c2c8a2e59ff9e31f6" title="Run the scanner, the database manager and all parsers.">valhalla_run</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle, <span class="keywordtype">int</span> loop, uint16_t timeout, <span class="keywordtype">int</span> priority);
<a name="l00305"></a>00305 
<a name="l00318"></a>00318 <span class="keywordtype">void</span> <a class="code" href="valhalla_8h.html#added98b690ff5cddc46ee14e8878c687" title="Wait until the scanning is finished.">valhalla_wait</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle);
<a name="l00319"></a>00319 
<a name="l00331"></a>00331 <span class="keywordtype">void</span> <a class="code" href="valhalla_8h.html#a81a0a49a353dbf9cf5593e229f44af41" title="Force to wake up the scanner.">valhalla_scanner_wakeup</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle);
<a name="l00332"></a>00332 
<a name="l00344"></a>00344 <span class="keywordtype">void</span> <a class="code" href="valhalla_8h.html#a7e3dfb81becc6efd5b91a1b3bcfe652e" title="Force Valhalla to retrieve metadata on-demand for a file.">valhalla_ondemand</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle, <span class="keyword">const</span> <span class="keywordtype">char</span> *file);
<a name="l00345"></a>00345 
<a name="l00350"></a>00350 <span class="comment">/******************************************************************************/</span>
<a name="l00351"></a>00351 <span class="comment">/*                                                                            */</span>
<a name="l00352"></a>00352 <span class="comment">/* Database Selections                                                        */</span>
<a name="l00353"></a>00353 <span class="comment">/*                                                                            */</span>
<a name="l00354"></a>00354 <span class="comment">/******************************************************************************/</span>
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 <span class="keyword">typedef</span> <span class="keyword">enum</span> valhalla_file_type {
<a name="l00357"></a>00357   VALHALLA_FILE_TYPE_NULL = 0,
<a name="l00358"></a>00358   VALHALLA_FILE_TYPE_AUDIO,
<a name="l00359"></a>00359   VALHALLA_FILE_TYPE_IMAGE,
<a name="l00360"></a>00360   VALHALLA_FILE_TYPE_PLAYLIST,
<a name="l00361"></a>00361   VALHALLA_FILE_TYPE_VIDEO,
<a name="l00362"></a>00362 } valhalla_file_type_t;
<a name="l00363"></a>00363 
<a name="l00365"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034c">00365</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> valhalla_meta_grp {
<a name="l00369"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034cadd1d0f003a9f2fe281be08599a2742bc">00369</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034cadd1d0f003a9f2fe281be08599a2742bc">VALHALLA_META_GRP_NIL</a> = 0,
<a name="l00370"></a>00370 
<a name="l00375"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034caa1d32510132a5e2389bdf5c8feda81e6">00375</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034caa1d32510132a5e2389bdf5c8feda81e6">VALHALLA_META_GRP_CLASSIFICATION</a>,
<a name="l00376"></a>00376 
<a name="l00381"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034caf67a4091d5736f1dc1916cdb3df18ae9">00381</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034caf67a4091d5736f1dc1916cdb3df18ae9">VALHALLA_META_GRP_COMMERCIAL</a>,
<a name="l00382"></a>00382 
<a name="l00386"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca822671e2aff9f068ce1d074a45781505">00386</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca822671e2aff9f068ce1d074a45781505">VALHALLA_META_GRP_CONTACT</a>,
<a name="l00387"></a>00387 
<a name="l00394"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca0063299389a53a1a3d448e595131ffdb">00394</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca0063299389a53a1a3d448e595131ffdb">VALHALLA_META_GRP_ENTITIES</a>,
<a name="l00395"></a>00395 
<a name="l00399"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca8627f129b6de32f9ba682e7df12d7210">00399</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca8627f129b6de32f9ba682e7df12d7210">VALHALLA_META_GRP_IDENTIFIER</a>,
<a name="l00400"></a>00400 
<a name="l00404"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca2a2177aea3228e6d906ed1ba372eddb0">00404</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca2a2177aea3228e6d906ed1ba372eddb0">VALHALLA_META_GRP_LEGAL</a>,
<a name="l00405"></a>00405 
<a name="l00409"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca1515dd587e20f1f2ec7d1c326c0b5df3">00409</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca1515dd587e20f1f2ec7d1c326c0b5df3">VALHALLA_META_GRP_MISCELLANEOUS</a>,
<a name="l00410"></a>00410 
<a name="l00414"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca5d90283f58f7330e814991487b9eb757">00414</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca5d90283f58f7330e814991487b9eb757">VALHALLA_META_GRP_MUSICAL</a>,
<a name="l00415"></a>00415 
<a name="l00420"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034caee26c49ff355b5f263c96d22ebaae50d">00420</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034caee26c49ff355b5f263c96d22ebaae50d">VALHALLA_META_GRP_ORGANIZATIONAL</a>,
<a name="l00421"></a>00421 
<a name="l00425"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca3da5afd7494fe872b9e947fbb89945b0">00425</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca3da5afd7494fe872b9e947fbb89945b0">VALHALLA_META_GRP_PERSONAL</a>,
<a name="l00426"></a>00426 
<a name="l00430"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034caed57274452171c8f52ece2f40295dbe6">00430</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034caed57274452171c8f52ece2f40295dbe6">VALHALLA_META_GRP_SPACIAL</a>,
<a name="l00431"></a>00431 
<a name="l00435"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca442af7b006270a096e7194024d508ca9">00435</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca442af7b006270a096e7194024d508ca9">VALHALLA_META_GRP_TECHNICAL</a>,
<a name="l00436"></a>00436 
<a name="l00441"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034cae27619619b6263284cee9a24b1ae2daa">00441</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034cae27619619b6263284cee9a24b1ae2daa">VALHALLA_META_GRP_TEMPORAL</a>,
<a name="l00442"></a>00442 
<a name="l00446"></a><a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca3b3b8e9ec62ff0898c4bb76aa58c7a8b">00446</a>   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034ca3b3b8e9ec62ff0898c4bb76aa58c7a8b">VALHALLA_META_GRP_TITLES</a>,
<a name="l00447"></a>00447 
<a name="l00448"></a>00448 } <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034c" title="Groups for metadata.">valhalla_meta_grp_t</a>;
<a name="l00449"></a>00449 
<a name="l00455"></a>00455 <span class="comment">/* Classification */</span>
<a name="l00456"></a>00456 <span class="preprocessor">#define VALHALLA_METADATA_CATEGORY                   &quot;category&quot;</span>
<a name="l00457"></a>00457 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_EPISODE                    &quot;episode&quot;</span>
<a name="l00458"></a>00458 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_GENRE                      &quot;genre&quot;</span>
<a name="l00459"></a>00459 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_MPAA                       &quot;mpaa&quot;</span>
<a name="l00460"></a>00460 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_RUNTIME                    &quot;runtime&quot;</span>
<a name="l00461"></a>00461 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_SEASON                     &quot;season&quot;</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_SYNOPSIS                   &quot;synopsis&quot;</span>
<a name="l00463"></a>00463 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_SYNOPSIS_SHOW              &quot;synopsis_show&quot;</span>
<a name="l00464"></a>00464 <span class="preprocessor"></span>
<a name="l00465"></a>00465 <span class="comment">/* Commercial */</span>
<a name="l00466"></a>00466 <span class="preprocessor">#define VALHALLA_METADATA_BUDGET                     &quot;budget&quot;</span>
<a name="l00467"></a>00467 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_COUNTRY                    &quot;country&quot;</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_REVENUE                    &quot;revenue&quot;</span>
<a name="l00469"></a>00469 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_STUDIO                     &quot;studio&quot;</span>
<a name="l00470"></a>00470 <span class="preprocessor"></span>
<a name="l00471"></a>00471 <span class="comment">/* Entities */</span>
<a name="l00472"></a>00472 <span class="preprocessor">#define VALHALLA_METADATA_ACTOR                      &quot;actor&quot;</span>
<a name="l00473"></a>00473 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_ARTIST                     &quot;artist&quot;</span>
<a name="l00474"></a>00474 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_AUTHOR                     &quot;author&quot;</span>
<a name="l00475"></a>00475 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_CASTING                    &quot;casting&quot;</span>
<a name="l00476"></a>00476 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_COMPOSER                   &quot;composer&quot;</span>
<a name="l00477"></a>00477 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_CREDITS                    &quot;credits&quot;</span>
<a name="l00478"></a>00478 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_DIRECTOR                   &quot;director&quot;</span>
<a name="l00479"></a>00479 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_DIRECTOR_PHOTO             &quot;director_photo&quot;</span>
<a name="l00480"></a>00480 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_EDITOR                     &quot;editor&quot;</span>
<a name="l00481"></a>00481 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_PRODUCER                   &quot;producer&quot;</span>
<a name="l00482"></a>00482 <span class="preprocessor"></span>
<a name="l00483"></a>00483 <span class="comment">/* Miscellaneous */</span>
<a name="l00484"></a>00484 <span class="preprocessor">#define VALHALLA_METADATA_COVER                      &quot;cover&quot;</span>
<a name="l00485"></a>00485 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_COVER_SEASON               &quot;cover_season&quot;</span>
<a name="l00486"></a>00486 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_COVER_SHOW                 &quot;cover_show&quot;</span>
<a name="l00487"></a>00487 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_COVER_SHOW_HEADER          &quot;cover_show_header&quot;</span>
<a name="l00488"></a>00488 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_FAN_ART                    &quot;fanart&quot;</span>
<a name="l00489"></a>00489 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_LYRICS                     &quot;lyrics&quot;</span>
<a name="l00490"></a>00490 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_THUMBNAIL                  &quot;thumbnail&quot;</span>
<a name="l00491"></a>00491 <span class="preprocessor"></span>
<a name="l00492"></a>00492 <span class="comment">/* Organizational */</span>
<a name="l00493"></a>00493 <span class="preprocessor">#define VALHALLA_METADATA_TRACK                      &quot;track&quot;</span>
<a name="l00494"></a>00494 <span class="preprocessor"></span>
<a name="l00495"></a>00495 <span class="comment">/* Personal */</span>
<a name="l00496"></a>00496 <span class="preprocessor">#define VALHALLA_METADATA_PLAY_COUNT                 &quot;playcount&quot;</span>
<a name="l00497"></a>00497 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_RATING                     &quot;rating&quot;</span>
<a name="l00498"></a>00498 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_WATCHED                    &quot;watched&quot;</span>
<a name="l00499"></a>00499 <span class="preprocessor"></span>
<a name="l00500"></a>00500 <span class="comment">/* Technical */</span>
<a name="l00501"></a>00501 <span class="preprocessor">#define VALHALLA_METADATA_AUDIO_BITRATE              &quot;audio_bitrate&quot;</span>
<a name="l00502"></a>00502 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_AUDIO_CHANNELS             &quot;audio_channels&quot;</span>
<a name="l00503"></a>00503 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_AUDIO_CODEC                &quot;audio_codec&quot;</span>
<a name="l00504"></a>00504 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_AUDIO_LANG                 &quot;audio_lang&quot;</span>
<a name="l00505"></a>00505 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_AUDIO_STREAMS              &quot;audio_streams&quot;</span>
<a name="l00506"></a>00506 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_DURATION                   &quot;duration&quot;</span>
<a name="l00507"></a>00507 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_HEIGHT                     &quot;height&quot;</span>
<a name="l00508"></a>00508 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_PICTURE_ORIENTATION        &quot;picture_orientation&quot;</span>
<a name="l00509"></a>00509 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_SUB_LANG                   &quot;sub_lang&quot;</span>
<a name="l00510"></a>00510 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_SUB_STREAMS                &quot;sub_streams&quot;</span>
<a name="l00511"></a>00511 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_VIDEO_ASPECT               &quot;video_aspect&quot;</span>
<a name="l00512"></a>00512 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_VIDEO_BITRATE              &quot;video_bitrate&quot;</span>
<a name="l00513"></a>00513 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_VIDEO_CODEC                &quot;video_codec&quot;</span>
<a name="l00514"></a>00514 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_VIDEO_STREAMS              &quot;video_streams&quot;</span>
<a name="l00515"></a>00515 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_WIDTH                      &quot;width&quot;</span>
<a name="l00516"></a>00516 <span class="preprocessor"></span>
<a name="l00517"></a>00517 <span class="comment">/* Temporal */</span>
<a name="l00518"></a>00518 <span class="preprocessor">#define VALHALLA_METADATA_DATE                       &quot;date&quot;</span>
<a name="l00519"></a>00519 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_PREMIERED                  &quot;premiered&quot;</span>
<a name="l00520"></a>00520 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_YEAR                       &quot;year&quot;</span>
<a name="l00521"></a>00521 <span class="preprocessor"></span>
<a name="l00522"></a>00522 <span class="comment">/* Titles */</span>
<a name="l00523"></a>00523 <span class="preprocessor">#define VALHALLA_METADATA_ALBUM                      &quot;album&quot;</span>
<a name="l00524"></a>00524 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_TITLE                      &quot;title&quot;</span>
<a name="l00525"></a>00525 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_TITLE_ALTERNATIVE          &quot;title_alternative&quot;</span>
<a name="l00526"></a>00526 <span class="preprocessor"></span><span class="preprocessor">#define VALHALLA_METADATA_TITLE_SHOW                 &quot;title_show&quot;</span>
<a name="l00527"></a>00527 <span class="preprocessor"></span>
<a name="l00532"></a>00532 <span class="keyword">typedef</span> <span class="keyword">enum</span> valhalla_db_type {
<a name="l00533"></a>00533   VALHALLA_DB_TYPE_ID,
<a name="l00534"></a>00534   VALHALLA_DB_TYPE_TEXT,
<a name="l00535"></a>00535   VALHALLA_DB_TYPE_GROUP,
<a name="l00536"></a>00536 } valhalla_db_type_t;
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 <span class="keyword">typedef</span> <span class="keyword">enum</span> valhalla_db_operator {
<a name="l00539"></a>00539   VALHALLA_DB_OPERATOR_IN,
<a name="l00540"></a>00540   VALHALLA_DB_OPERATOR_NOTIN,
<a name="l00541"></a>00541   VALHALLA_DB_OPERATOR_EQUAL,
<a name="l00542"></a>00542 } valhalla_db_operator_t;
<a name="l00543"></a>00543 
<a name="l00545"></a><a class="code" href="structvalhalla__db__item__t.html">00545</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>valhalla_db_item_s {
<a name="l00546"></a>00546   valhalla_db_type_t type;
<a name="l00547"></a>00547   int64_t     id;
<a name="l00548"></a>00548   <span class="keyword">const</span> <span class="keywordtype">char</span> *text;
<a name="l00549"></a>00549   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034c" title="Groups for metadata.">valhalla_meta_grp_t</a> group;
<a name="l00550"></a>00550 } <a class="code" href="structvalhalla__db__item__t.html" title="Main structure to search in the DB.">valhalla_db_item_t</a>;
<a name="l00551"></a>00551 
<a name="l00553"></a><a class="code" href="structvalhalla__db__metares__t.html">00553</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>valhalla_db_metares_s {
<a name="l00554"></a>00554   int64_t     meta_id,    data_id;
<a name="l00555"></a>00555   <span class="keyword">const</span> <span class="keywordtype">char</span> *meta_name, *data_value;
<a name="l00556"></a>00556   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034c" title="Groups for metadata.">valhalla_meta_grp_t</a> group;
<a name="l00557"></a>00557   <span class="keywordtype">int</span>         external;
<a name="l00558"></a>00558 } <a class="code" href="structvalhalla__db__metares__t.html" title="Results for valhalla_db_metalist_get().">valhalla_db_metares_t</a>;
<a name="l00559"></a>00559 
<a name="l00561"></a><a class="code" href="structvalhalla__db__fileres__t.html">00561</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>valhalla_db_fileres_s {
<a name="l00562"></a>00562   int64_t     id;
<a name="l00563"></a>00563   <span class="keyword">const</span> <span class="keywordtype">char</span> *path;
<a name="l00564"></a>00564   valhalla_file_type_t type;
<a name="l00565"></a>00565 } <a class="code" href="structvalhalla__db__fileres__t.html" title="Results for valhalla_db_filelist_get().">valhalla_db_fileres_t</a>;
<a name="l00566"></a>00566 
<a name="l00568"></a><a class="code" href="structvalhalla__db__restrict__t.html">00568</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>valhalla_db_restrict_s {
<a name="l00569"></a>00569   <span class="keyword">struct </span>valhalla_db_restrict_s *next;
<a name="l00570"></a>00570   valhalla_db_operator_t op;
<a name="l00571"></a>00571   <a class="code" href="structvalhalla__db__item__t.html" title="Main structure to search in the DB.">valhalla_db_item_t</a> meta;
<a name="l00572"></a>00572   <a class="code" href="structvalhalla__db__item__t.html" title="Main structure to search in the DB.">valhalla_db_item_t</a> data;
<a name="l00573"></a>00573 } <a class="code" href="structvalhalla__db__restrict__t.html" title="Restriction.">valhalla_db_restrict_t</a>;
<a name="l00574"></a>00574 
<a name="l00576"></a><a class="code" href="structvalhalla__db__filemeta__t.html">00576</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>valhalla_db_filemeta_s {
<a name="l00577"></a>00577   <span class="keyword">struct </span>valhalla_db_filemeta_s *next;
<a name="l00578"></a>00578   int64_t  meta_id;
<a name="l00579"></a>00579   int64_t  data_id;
<a name="l00580"></a>00580   <span class="keywordtype">char</span>    *meta_name;
<a name="l00581"></a>00581   <span class="keywordtype">char</span>    *data_value;
<a name="l00582"></a>00582   <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034c" title="Groups for metadata.">valhalla_meta_grp_t</a> group;
<a name="l00583"></a>00583   <span class="keywordtype">int</span>      external;
<a name="l00584"></a>00584 } <a class="code" href="structvalhalla__db__filemeta__t.html" title="Results for valhalla_db_file_get().">valhalla_db_filemeta_t</a>;
<a name="l00585"></a>00585 
<a name="l00586"></a>00586 <span class="preprocessor">#define VALHALLA_DB_SEARCH(_id, _text, _group, _type) \</span>
<a name="l00587"></a>00587 <span class="preprocessor">  {.type = VALHALLA_DB_TYPE_##_type,                  \</span>
<a name="l00588"></a>00588 <span class="preprocessor">   .id = _id, .text = _text, .group = VALHALLA_META_GRP_##_group}</span>
<a name="l00589"></a>00589 <span class="preprocessor"></span>
<a name="l00590"></a>00590 <span class="preprocessor">#define VALHALLA_DB_RESTRICT(_op, _m_id, _d_id,                  \</span>
<a name="l00591"></a>00591 <span class="preprocessor">                             _m_text, _d_text, _m_type, _d_type) \</span>
<a name="l00592"></a>00592 <span class="preprocessor">  {.next = NULL, .op = VALHALLA_DB_OPERATOR_##_op,               \</span>
<a name="l00593"></a>00593 <span class="preprocessor">   .meta = VALHALLA_DB_SEARCH (_m_id, _m_text, NIL, _m_type),   \</span>
<a name="l00594"></a>00594 <span class="preprocessor">   .data = VALHALLA_DB_SEARCH (_d_id, _d_text, NIL, _d_type)}</span>
<a name="l00595"></a>00595 <span class="preprocessor"></span>
<a name="l00596"></a>00596 
<a name="l00603"></a><a class="code" href="valhalla_8h.html#a20a5534f9b4d426c66df83f75a467a37">00603</a> <span class="preprocessor">#define VALHALLA_DB_SEARCH_ID(meta_id, group) \</span>
<a name="l00604"></a>00604 <span class="preprocessor">  VALHALLA_DB_SEARCH (meta_id, NULL, group, ID)</span>
<a name="l00605"></a>00605 <span class="preprocessor"></span>
<a name="l00606"></a><a class="code" href="valhalla_8h.html#aa4e57c76b03ba9421198ca7604e08ddd">00606</a> <span class="preprocessor">#define VALHALLA_DB_SEARCH_TEXT(meta_name, group) \</span>
<a name="l00607"></a>00607 <span class="preprocessor">  VALHALLA_DB_SEARCH (0, meta_name, group, TEXT)</span>
<a name="l00608"></a>00608 <span class="preprocessor"></span>
<a name="l00609"></a><a class="code" href="valhalla_8h.html#a1f9c1afcbdb1f4b575ff58f13ec1bc21">00609</a> <span class="preprocessor">#define VALHALLA_DB_SEARCH_GRP(group) \</span>
<a name="l00610"></a>00610 <span class="preprocessor">  VALHALLA_DB_SEARCH (0, NULL, group, GROUP)</span>
<a name="l00611"></a>00611 <span class="preprocessor"></span>
<a name="l00613"></a><a class="code" href="valhalla_8h.html#a81880bb832207e35b9c9ad2e3c677a67">00613</a> <span class="preprocessor">#define VALHALLA_DB_RESTRICT_INT(op, meta, data) \</span>
<a name="l00614"></a>00614 <span class="preprocessor">  VALHALLA_DB_RESTRICT (op, meta, data, NULL, NULL, ID, ID)</span>
<a name="l00615"></a>00615 <span class="preprocessor"></span>
<a name="l00616"></a><a class="code" href="valhalla_8h.html#a3a0f0299b69687f0b49713d4b2048cde">00616</a> <span class="preprocessor">#define VALHALLA_DB_RESTRICT_STR(op, meta, data) \</span>
<a name="l00617"></a>00617 <span class="preprocessor">  VALHALLA_DB_RESTRICT (op, 0, 0, meta, data, TEXT, TEXT)</span>
<a name="l00618"></a>00618 <span class="preprocessor"></span>
<a name="l00619"></a><a class="code" href="valhalla_8h.html#a9087094d70144505d8b9b3d875f6505e">00619</a> <span class="preprocessor">#define VALHALLA_DB_RESTRICT_INTSTR(op, meta, data) \</span>
<a name="l00620"></a>00620 <span class="preprocessor">  VALHALLA_DB_RESTRICT (op, meta, 0, NULL, data, ID, TEXT)</span>
<a name="l00621"></a>00621 <span class="preprocessor"></span>
<a name="l00622"></a><a class="code" href="valhalla_8h.html#a59de03242e252f48605690eebe1b4bd8">00622</a> <span class="preprocessor">#define VALHALLA_DB_RESTRICT_STRINT(op, meta, data) \</span>
<a name="l00623"></a>00623 <span class="preprocessor">  VALHALLA_DB_RESTRICT (op, 0, data, meta, NULL, TEXT, ID)</span>
<a name="l00624"></a>00624 <span class="preprocessor"></span>
<a name="l00625"></a><a class="code" href="valhalla_8h.html#aab196189ef00f3b565eab51abe623586">00625</a> <span class="preprocessor">#define VALHALLA_DB_RESTRICT_LINK(from, to) \</span>
<a name="l00626"></a>00626 <span class="preprocessor">  do {(to).next = &amp;(from);} while (0)</span>
<a name="l00627"></a>00627 <span class="preprocessor"></span>
<a name="l00629"></a><a class="code" href="valhalla_8h.html#a13cb8b97b3dbabbd224ec24277d23c0a">00629</a> <span class="preprocessor">#define VALHALLA_DB_FILEMETA_FREE(meta)                  \</span>
<a name="l00630"></a>00630 <span class="preprocessor">  do {                                                   \</span>
<a name="l00631"></a>00631 <span class="preprocessor">    typeof (meta) tmp;                                   \</span>
<a name="l00632"></a>00632 <span class="preprocessor">    while (meta) {                                       \</span>
<a name="l00633"></a>00633 <span class="preprocessor">      if ((meta)-&gt;meta_name)  free ((meta)-&gt;meta_name);  \</span>
<a name="l00634"></a>00634 <span class="preprocessor">      if ((meta)-&gt;data_value) free ((meta)-&gt;data_value); \</span>
<a name="l00635"></a>00635 <span class="preprocessor">      tmp = (meta)-&gt;next; free (meta); meta = tmp;}      \</span>
<a name="l00636"></a>00636 <span class="preprocessor">  } while (0)</span>
<a name="l00637"></a>00637 <span class="preprocessor"></span>
<a name="l00663"></a>00663 <span class="keywordtype">int</span> <a class="code" href="valhalla_8h.html#a164de503616552bfe6b225dd167de89a" title="Retrieve a list of metadata according to a condition.">valhalla_db_metalist_get</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle,
<a name="l00664"></a>00664                               <a class="code" href="structvalhalla__db__item__t.html" title="Main structure to search in the DB.">valhalla_db_item_t</a> *search,
<a name="l00665"></a>00665                               <a class="code" href="structvalhalla__db__restrict__t.html" title="Restriction.">valhalla_db_restrict_t</a> *restriction,
<a name="l00666"></a>00666                               <span class="keywordtype">int</span> (*result_cb) (<span class="keywordtype">void</span> *data,
<a name="l00667"></a>00667                                                 <a class="code" href="structvalhalla__db__metares__t.html" title="Results for valhalla_db_metalist_get().">valhalla_db_metares_t</a> *res),
<a name="l00668"></a>00668                               <span class="keywordtype">void</span> *data);
<a name="l00669"></a>00669 
<a name="l00690"></a>00690 <span class="keywordtype">int</span> <a class="code" href="valhalla_8h.html#a4dce37fe8f05610cdcc48ea554b1f9bc" title="Retrieve a list of files.">valhalla_db_filelist_get</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle,
<a name="l00691"></a>00691                               valhalla_file_type_t filetype,
<a name="l00692"></a>00692                               <a class="code" href="structvalhalla__db__restrict__t.html" title="Restriction.">valhalla_db_restrict_t</a> *restriction,
<a name="l00693"></a>00693                               <span class="keywordtype">int</span> (*result_cb) (<span class="keywordtype">void</span> *data,
<a name="l00694"></a>00694                                                 <a class="code" href="structvalhalla__db__fileres__t.html" title="Results for valhalla_db_filelist_get().">valhalla_db_fileres_t</a> *res),
<a name="l00695"></a>00695                               <span class="keywordtype">void</span> *data);
<a name="l00696"></a>00696 
<a name="l00722"></a>00722 <span class="keywordtype">int</span> <a class="code" href="valhalla_8h.html#a94b9ea1ee1dfe0e5d8f03670125ba8e9" title="Retrieve all metadata of a file.">valhalla_db_file_get</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle,
<a name="l00723"></a>00723                           int64_t <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *path,
<a name="l00724"></a>00724                           <a class="code" href="structvalhalla__db__restrict__t.html" title="Restriction.">valhalla_db_restrict_t</a> *restriction,
<a name="l00725"></a>00725                           <a class="code" href="structvalhalla__db__filemeta__t.html" title="Results for valhalla_db_file_get().">valhalla_db_filemeta_t</a> **res);
<a name="l00726"></a>00726 
<a name="l00795"></a>00795 <span class="keywordtype">int</span> <a class="code" href="valhalla_8h.html#af57a070d803ea2a4dfb0102cdbc29c35" title="Insert an external metadata in the database.">valhalla_db_metadata_insert</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle, <span class="keyword">const</span> <span class="keywordtype">char</span> *path,
<a name="l00796"></a>00796                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *meta, <span class="keyword">const</span> <span class="keywordtype">char</span> *data,
<a name="l00797"></a>00797                                  <a class="code" href="valhalla_8h.html#ad98e3f09f2b0d40c244bb37f7346034c" title="Groups for metadata.">valhalla_meta_grp_t</a> group);
<a name="l00798"></a>00798 
<a name="l00814"></a>00814 <span class="keywordtype">int</span> <a class="code" href="valhalla_8h.html#a850f3c0b78e670c424b3231d1e154dc1" title="Update an external metadata in the database.">valhalla_db_metadata_update</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle, <span class="keyword">const</span> <span class="keywordtype">char</span> *path,
<a name="l00815"></a>00815                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *meta, <span class="keyword">const</span> <span class="keywordtype">char</span> *data,
<a name="l00816"></a>00816                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *ndata);
<a name="l00817"></a>00817 
<a name="l00832"></a>00832 <span class="keywordtype">int</span> <a class="code" href="valhalla_8h.html#aa95d52ed5f2b4fae6a34ab8adc0f1f32" title="Delete an external metadata in the database.">valhalla_db_metadata_delete</a> (<a class="code" href="valhalla_8h.html#a56c035962cee86ce95e1964acc0b097f" title="Scanner handle.">valhalla_t</a> *handle, <span class="keyword">const</span> <span class="keywordtype">char</span> *path,
<a name="l00833"></a>00833                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *meta, <span class="keyword">const</span> <span class="keywordtype">char</span> *data);
<a name="l00834"></a>00834 
<a name="l00839"></a>00839 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00840"></a>00840 <span class="preprocessor"></span>}
<a name="l00841"></a>00841 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
<a name="l00842"></a>00842 
<a name="l00843"></a>00843 <span class="preprocessor">#endif </span><span class="comment">/* VALHALLA_H */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Sun Dec 6 12:42:31 2009 for libvalhalla by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
